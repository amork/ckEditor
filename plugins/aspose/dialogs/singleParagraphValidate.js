(function(){CKEDITOR.dialog.add("singleParagraphValidate",function(d){return{title:"Multiple types of content warning",resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:300,minHeight:100,onShow:function(){document.querySelector("a.cke_dialog_ui_button_ok").style.backgroundColor="#1487f5"},contents:[{id:"singlepv",label:"First Tab",accessKey:"Q",elements:[{id:"msg",type:"html",html:'\x3cdiv\x3e\x3ch3\x3eMultiple types of content are detected (text, tables, multiple paragraphs).\x3c/h3\x3e\x3ch3\x3eOnly one of these can be inserted in a single action. First section will be\x3c/h3\x3e\x3ch3\x3einserted. Please insert remainder as separate discussions.\x3c/h3\x3e\x3cdiv id\x3d"singleparagraphValidate_errors"\x3e\x3c/div\x3e\x3c/div\x3e'}]}],
onOk:function(){var a=$(d.editable().$).clone();useOnlyOneParagraph(d,a)},onCancel:function(){d.execCommand("undo")}}})})();
function useOnlyOneParagraph(d,a){a.find("div").replaceWith(function(){return this.innerHTML});var c="",b=a.children(),b=a.children();1<b.length&&-1!=="P DIV H1 H2 H3 H4 H5 H6 H7".split(" ").indexOf(b[0].tagName)?(a.find("table").remove(),b=a.children(),b.each(function(a){c=-1!=="P H1 H2 H3 H4 H5 H6 H7".split(" ").indexOf(this.tagName)?c+this.innerHTML:c+this.outerHTML;a!==b.length-1&&"\x3cbr\x3e"!==this.innerHTML&&this.innerText.trim().length&&(c+="\x3cbr\x3e");a&&this.parentNode.removeChild(this)}),
b[0].innerHTML=c):"table"!==b[0].tagName&&a.text().length>a.find("table").text().length&&a.find("table").remove();d.setData(a.html())};