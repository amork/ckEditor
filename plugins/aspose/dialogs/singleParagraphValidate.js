(function(){CKEDITOR.dialog.add("singleParagraphValidate",function(b){return{title:"Test Dialog",resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:300,minHeight:100,onShow:function(){document.getElementById("singleparagraphValidate_errors").innerHTML=CKEDITOR._.errors.join("\n")},contents:[{id:"singlepv",label:"First Tab",accessKey:"Q",elements:[{id:"msg",type:"html",html:'\x3cdiv\x3e\x3ch3\x3eThis is some sample HTML content.\x3c/h3\x3e\x3ch3\x3eErrors list\x3c/h3\x3e\x3cdiv id\x3d"singleparagraphValidate_errors"\x3e\x3c/div\x3e\x3c/div\x3e'}]}],
onOk:function(){var a=$(b.element.$);useOnlyOneParagraph(a)},onCancel:function(){b.execCommand("undo")}}})})();
function useOnlyOneParagraph(b){b.find("div").replaceWith(function(){return this.innerHTML});var a="",c=b.children(),c=b.children();1<c.length&&-1!=="P DIV H1 H2 H3 H4 H5 H6 H7".split(" ").indexOf(c[0].tagName)&&(c.each(function(b){if(-1!=="P DIV H1 H2 H3 H4 H5 H6 H7".split(" ").indexOf(this.tagName))a+=this.innerHTML;else if("TABLE"!==this.tagName)if(-1!==["UL","OL"].indexOf(this.tagName))for(var d=0;d<this.children.length;d++)a+=this.children[d].innerHTML;else a+=this.outerHTML;b!==c.length-1&&
"\x3cbr\x3e"!==this.innerHTML&&(a+="\x3cbr\x3e");b&&this.parentNode.removeChild(this)}),c[0].innerHTML=a)};