(function(){CKEDITOR.dialog.add("singleParagraphValidate",function(a){return{title:"Test Dialog",resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:300,minHeight:100,contents:[{id:"tab1",label:"First Tab",accessKey:"Q",elements:[{type:"html",html:"\x3ch3\x3eThis is some sample HTML content.\x3c/h3\x3e"}]}],onOk:function(){var b=$(a.element.$);useOnlyOneParagraph(b)},onCancel:function(){a.execCommand("undo")}}})})();
function useOnlyOneParagraph(a){a.find("div").replaceWith(function(){return this.innerHTML});var b="",c=a.children(),c=a.children();1<c.length&&-1!=="P DIV H1 H2 H3 H4 H5 H6 H7".split(" ").indexOf(c[0].tagName)&&(c.each(function(a){-1!=="P DIV H1 H2 H3 H4 H5 H6 H7".split(" ").indexOf(this.tagName)?b+=this.innerHTML:"TABLE"!==this.tagName&&(-1!==["UL","OL"].indexOf(this.tagName)?_.forEach(this.children,function(a,c){b+=a.innerHTML}):b+=this.outerHTML);a!==c.length-1&&"\x3cbr\x3e"!==this.innerHTML&&
(b+="\x3cbr\x3e");a&&this.parentNode.removeChild(this)}),c[0].innerHTML=b)};